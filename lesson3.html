<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Luá»“ng XÃ¢y Dá»±ng Game â€“ Top-Down Shooter (Lesson3)</title>

  <!-- Fonts & Base Styles -->
  <style>
    :root{
      --bg:#0f172a;        /* slate-900 */
      --card:#111827;      /* gray-900 */
      --text:#e5e7eb;      /* gray-200 */
      --muted:#9ca3af;     /* gray-400 */
      --accent:#22d3ee;    /* cyan-400 */
      --border:#1f2937;    /* gray-800 */
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:16px/1.6 system-ui,Segoe UI,Roboto,Helvetica,Arial}
    .wrap{max-width:1100px;margin:40px auto;padding:0 16px}
    h1{font-size:28px;margin:0 0 18px}
    h2{font-size:20px;margin:28px 0 10px;color:var(--accent)}
    p,li{color:var(--text)}
    .card{
      background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));
      border:1px solid var(--border);
      border-radius:16px;
      padding:18px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
      margin:18px 0;
    }
    .note{color:var(--muted);font-size:14px}
    .list{border-collapse:collapse;width:100%;overflow:hidden;border-radius:12px;border:1px solid var(--border)}
    .list th,.list td{padding:10px 12px;border-bottom:1px solid var(--border)}
    .list th{color:var(--accent);text-align:left;background:#0b1222}
    .tips li{margin:6px 0}
    .kbd{padding:.2rem .45rem;border:1px solid var(--border);border-bottom-width:2px;border-radius:6px;background:#0b1222}
    /* Mermaid theme tweaks */
    .mermaid{background:#0b1222;border:1px solid var(--border);border-radius:12px;padding:12px}
    code {background:#0b1222;padding:2px 6px;border-radius:4px;color:#ff79c6;}
  </style>

  <!-- Mermaid (CDN) -->
  <script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({
      startOnLoad: true,
      theme: "dark",
      themeVariables: {
        primaryColor: "#111827",
        primaryBorderColor: "#22d3ee",
        primaryTextColor: "#e5e7eb",
        lineColor: "#22d3ee",
        secondaryColor: "#0b1222",
        tertiaryColor: "#0b1222",
        fontFamily: "system-ui, Segoe UI, Roboto, Helvetica, Arial",
        fontSize: "16px",
        labelBackground: "#1f2937",
        labelTextColor: "#e5e7eb",
        nodeBorder: "#22d3ee",
        clusterBackground: "#0b1222",
        clusterBorder: "#22d3ee"
      }
    });
  </script>
</head>
<body>
  <main class="wrap">
    <nav class="breadcrumb">
      <a href="index.html">ğŸ  Trang chá»§</a> > <span>Buá»•i 3</span>
    </nav>
    <h1>ğŸ”« HÆ°á»›ng Dáº«n LÃ m Game Báº±ng NgÃ´n Ngá»¯ GML</h1>

    <section class="card">
      <h2>1) ğŸ® Luá»“ng Cháº¡y Cá»§a Game</h2>
      <div class="mermaid">
flowchart TD
  A["ğŸš€ Báº¯t Ä‘áº§u game"] --> B["ğŸ  Táº£i phÃ²ng chÃ­nh"]
  B --> C["ğŸ™‚ Táº¡o nhÃ¢n váº­t"]
  B --> D["ğŸ‘¾ Táº¡o káº» Ä‘á»‹ch"]
  B --> E["ğŸ§± Táº¡o tÆ°á»ng"]
  B --> F{"â“ CÃ³ mÃ¡y sinh Ä‘á»‹ch?"}
  F -->|CÃ³| G["â° Äáº·t Ä‘á»“ng há»“ sinh Ä‘á»‹ch"]
  F -->|KhÃ´ng| H["â¡ï¸ Tiáº¿p tá»¥c"]

  H --> I["ğŸ”„ Má»—i khung hÃ¬nh"]
  I --> J["ğŸ™‚ NhÃ¢n váº­t: Quay theo chuá»™t + Nháº¥n phÃ­m"]
  I --> K{"ğŸ‘¾ Káº» Ä‘á»‹ch tháº¥y nhÃ¢n váº­t?"}
  K -->|CÃ³| L["ğŸ‘¾ Äuá»•i theo, tá»‘c Ä‘á»™=4"]
  K -->|KhÃ´ng| M["ğŸ‘¾ Äá»©ng yÃªn"]

  J --> N{"ğŸ–±ï¸ Nháº¥n chuá»™t?"}
  N -->|CÃ³| O["ğŸ”« Táº¡o Ä‘áº¡n"]

  I --> Q{"ğŸ’¥ CÃ³ va cháº¡m?"}
  Q -->|"Äáº¡n vs Káº» Ä‘á»‹ch"| R["ğŸ—‘ï¸ XÃ³a Ä‘áº¡n && káº» Ä‘á»‹ch"]
  Q -->|"NhÃ¢n váº­t vs Káº» Ä‘á»‹ch"| S["ğŸ’” Máº¥t máº¡ng hoáº·c máº¥t mÃ¡u"]

  G --> U["â° Äá»“ng há»“ vá» 0"]
  U --> V["ğŸ‘¾ Táº¡o thÃªm káº» Ä‘á»‹ch"]
  V --> G
      </div>
      <p class="note">ğŸ“Œ Náº¿u sÆ¡ Ä‘á»“ khÃ´ng hiá»‡n, kiá»ƒm tra máº¡ng (cáº§n táº£i Mermaid) hoáº·c thá»­ trÃ¬nh duyá»‡t khÃ¡c.</p>
    </section>

    <section class="card">
      <h2>2) ğŸ•¹ï¸ Äiá»u Khiá»ƒn NhÃ¢n Váº­t</h2>
      <div class="mermaid">
flowchart TD
  A["ğŸ™‚ Má»—i khung hÃ¬nh"] --> B{"â“ Nháº¥n phÃ­m W/A/S/D?"}
  B -->|W| C["â¬† Äi lÃªn"]
  B -->|S| D["â¬‡ Äi xuá»‘ng"]
  B -->|A| E["â¬… Äi trÃ¡i"]
  B -->|D| F["â¡ Äi pháº£i"]
  B -->|KhÃ´ng| G["ğŸ›‘ Äá»©ng yÃªn"]

  A --> H["ğŸ‘€ Quay máº·t theo chuá»™t"]
  H --> I{"ğŸ–±ï¸ Nháº¥n chuá»™t?"}
  I -->|CÃ³| J["ğŸ”« Báº¯n Ä‘áº¡n"]
      </div>
    </section>

    <section class="card">
      <h2>3) â° MÃ¡y Sinh Káº» Äá»‹ch</h2>
      <div class="mermaid">
flowchart TD
  A["âš™ï¸ Táº¡o mÃ¡y sinh"] --> B["â° Äáº·t Ä‘á»“ng há»“ = 30"]
  B --> C["â° Äá»“ng há»“ cháº¡y"]
  C --> D["ğŸ‘¾ Táº¡o káº» Ä‘á»‹ch"]
  D --> B
      </div>
    </section>

    <section class="card">
      <h2>4) ğŸ“‹ CÃ¡c BÆ°á»›c LÃ m Game</h2>
      <table class="list">
        <thead>
          <tr><th>BÆ°á»›c</th><th>HÃ nh Ä‘á»™ng</th></tr>
        </thead>
        <tbody>
          <tr><td>1</td><td>Táº¡o sprite: <code>spr_player</code> (hÃ¬nh vuÃ´ng xanh), <code>spr_enemy</code> (hÃ¬nh vuÃ´ng Ä‘á»), <code>spr_bullet</code> (hÃ¬nh trÃ²n nhá»), <code>spr_wall</code> (hÃ¬nh chá»¯ nháº­t xÃ¡m)</td></tr>
          <tr><td>2</td><td>Táº¡o object: <code>o_player</code>, <code>o_enemy</code>, <code>o_bullet</code>, <code>o_wall</code>, <code>o_spawner</code></td></tr>
          <tr><td>3</td><td>Táº¡o <code>Room_Main</code> (800x600) vÃ  Ä‘áº·t cÃ¡c object vÃ o</td></tr>
          <tr><td>4</td><td>Láº­p trÃ¬nh <code>Create</code> cho nhÃ¢n váº­t: <code>direction = point_direction(x, y, mouse_x, mouse_y)</code></td></tr>
          <tr><td>5</td><td>Láº­p trÃ¬nh <code>Step</code> cho nhÃ¢n váº­t: di chuyá»ƒn W/A/S/D + báº¯n chuá»™t trÃ¡i</td></tr>
          <tr><td>6</td><td>Láº­p trÃ¬nh <code>Step</code> cho káº» Ä‘á»‹ch: <code>direction = point_direction(x, y, o_player.x, o_player.y); speed = 2</code></td></tr>
          <tr><td>7</td><td>Láº­p trÃ¬nh <code>Collision</code>: Ä‘áº¡n vs káº» Ä‘á»‹ch (xÃ³a cáº£ 2), nhÃ¢n váº­t vs káº» Ä‘á»‹ch (game over)</td></tr>
          <tr><td>8</td><td>Láº­p trÃ¬nh <code>Alarm</code> cho spawner: táº¡o káº» Ä‘á»‹ch má»—i 2 giÃ¢y</td></tr>
        </tbody>
      </table>
    </section>

    <section class="card">
      <h2>5) ğŸ› ï¸ Máº¹o TrÃ¡nh Lá»—i</h2>
      <ul class="tips">
        <li>ğŸ’¥ Va cháº¡m khÃ´ng hoáº¡t Ä‘á»™ng? â†’ Kiá»ƒm tra <b>hÃ¬nh dáº¡ng va cháº¡m</b>.</li>
        <li>ğŸ”« Äáº¡n bay sai hÆ°á»›ng? â†’ Äáº·t <b>hÆ°á»›ng trÆ°á»›c tá»‘c Ä‘á»™</b>.</li>
        <li>ğŸ‘¾ Káº» Ä‘á»‹ch khÃ´ng Ä‘uá»•i? â†’ Kiá»ƒm tra <code>instance_exists(o_player)</code>.</li>
        <li>â° Äá»“ng há»“ khÃ´ng cháº¡y? â†’ Nhá»› <b>Ä‘áº·t láº¡i Ä‘á»“ng há»“</b> trong <b>Alarm Event</b>.</li>
      </ul>
    </section>

    <section class="card">
      <h2>6) ğŸ“˜ CÃ¡c Lá»‡nh GML Quan Trá»ng</h2>
      <div>
        <h3>1. <code>point_direction(x1, y1, x2, y2)</code></h3>
        <p>GiÃºp nhÃ¢n váº­t quay máº·t vá» má»™t Ä‘iá»ƒm. VÃ­ dá»¥: Quay theo chuá»™t hoáº·c káº» Ä‘á»‹ch! ğŸ˜</p>
        <ul>
          <li><b>x1, y1</b>: Vá»‹ trÃ­ cá»§a mÃ¬nh</li>
          <li><b>x2, y2</b>: Vá»‹ trÃ­ má»¥c tiÃªu</li>
          <li>Káº¿t quáº£: Má»™t gÃ³c (0-360 Ä‘á»™)</li>
        </ul>

        <h3>2. <code>instance_exists(object)</code></h3>
        <p>Kiá»ƒm tra xem má»™t Ä‘á»‘i tÆ°á»£ng cÃ²n tá»“n táº¡i khÃ´ng. VÃ­ dá»¥: "Káº» Ä‘á»‹ch cÃ²n sá»‘ng khÃ´ng?" ğŸ¤”</p>

        <h3>3. <code>with (target)</code></h3>
        <p>Ra lá»‡nh cho Ä‘á»‘i tÆ°á»£ng khÃ¡c. VÃ­ dá»¥: Khi Ä‘áº¡n cháº¡m káº» Ä‘á»‹ch, xÃ³a cáº£ hai:</p>
        <pre><code>instance_destroy();          // XÃ³a Ä‘áº¡n
with(other) instance_destroy();  // XÃ³a káº» Ä‘á»‹ch</code></pre>

        <h3>4. <code>global.variable</code></h3>
        <p>Biáº¿n dÃ¹ng chung cho cáº£ game. VÃ­ dá»¥: <code>global.score = 0</code> Ä‘á»ƒ lÆ°u Ä‘iá»ƒm sá»‘. ğŸ“Š</p>

        <h3>5. <code>keyboard_check(key)</code></h3>
        <p>Kiá»ƒm tra phÃ­m Ä‘ang Ä‘Æ°á»£c giá»¯. VÃ­ dá»¥: Nháº¥n <code>W</code> Ä‘á»ƒ Ä‘i lÃªn. ğŸš¶</p>

        <h3>6. <code>keyboard_check_pressed(key)</code> & <code>keyboard_check_released(key)</code></h3>
        <p>Kiá»ƒm tra khi phÃ­m vá»«a Ä‘Æ°á»£c nháº¥n hoáº·c tháº£. DÃ¹ng Ä‘á»ƒ báº¯n sÃºng, nháº£y, v.v. ğŸ”«</p>
        <table class="list">
          <thead>
            <tr><th>Lá»‡nh</th><th>Ã nghÄ©a</th></tr>
          </thead>
          <tbody>
            <tr><td><code>keyboard_check_pressed</code></td><td>PhÃ­m vá»«a Ä‘Æ°á»£c nháº¥n</td></tr>
            <tr><td><code>keyboard_check_released</code></td><td>PhÃ­m vá»«a Ä‘Æ°á»£c tháº£</td></tr>
          </tbody>
        </table>

        <h3>7. <code>instance_create_layer(x, y, layer, object)</code></h3>
        <p>Táº¡o Ä‘á»‘i tÆ°á»£ng má»›i, nhÆ° Ä‘áº¡n hoáº·c káº» Ä‘á»‹ch, táº¡i vá»‹ trÃ­ x, y. ğŸ’¥</p>

        <h3>8. <code>instance_destroy()</code></h3>
        <p>XÃ³a Ä‘á»‘i tÆ°á»£ng khá»i game. VÃ­ dá»¥: XÃ³a Ä‘áº¡n hoáº·c káº» Ä‘á»‹ch khi va cháº¡m. ğŸ—‘ï¸</p>

        <h3>9. <code>direction</code> & <code>speed</code></h3>
        <table class="list">
          <thead>
            <tr><th>Biáº¿n</th><th>Ã nghÄ©a</th></tr>
          </thead>
          <tbody>
            <tr><td><code>direction</code></td><td>HÆ°á»›ng di chuyá»ƒn (0-360 Ä‘á»™)</td></tr>
            <tr><td><code>speed</code></td><td>Tá»‘c Ä‘á»™ di chuyá»ƒn</td></tr>
          </tbody>
        </table>
        <p>VÃ­ dá»¥: <code>direction = 90; speed = 4;</code> â†’ Äi xuá»‘ng. â¬‡</p>

        <h3>10. <code>mouse_x</code> & <code>mouse_y</code></h3>
        <p>Láº¥y vá»‹ trÃ­ chuá»™t Ä‘á»ƒ quay máº·t hoáº·c báº¯n. ğŸ–±ï¸</p>

        <h3>11. <code>lengthdir_x(len, dir)</code> & <code>lengthdir_y(len, dir)</code></h3>
        <p>Äá»•i gÃ³c vÃ  Ä‘á»™ dÃ i thÃ nh tá»a Ä‘á»™. DÃ¹ng Ä‘á»ƒ báº¯n Ä‘áº¡n lá»‡ch hÆ°á»›ng. ğŸ¯</p>

        <h3>12. <code>alarm[i]</code></h3>
        <p>Äá»“ng há»“ Ä‘áº¿m ngÆ°á»£c, khi vá» 0 thÃ¬ cháº¡y lá»‡nh. DÃ¹ng Ä‘á»ƒ sinh káº» Ä‘á»‹ch, Ä‘áº·t thá»i gian báº¯n, v.v. â°</p>
      </div>
    </section>

    <section class="card">
      <h2>7) ğŸ¯ TÃ³m táº¯t buá»•i há»c</h2>
      <p>Trong buá»•i há»c nÃ y, chÃºng ta Ä‘Ã£ há»c Ä‘Æ°á»£c:</p>
      <ul class="tips">
        <li>âœ… Luá»“ng cháº¡y cá»§a game báº¯n sÃºng tá»« trÃªn xuá»‘ng</li>
        <li>âœ… Äiá»u khiá»ƒn nhÃ¢n váº­t quay theo chuá»™t vÃ  báº¯n sÃºng</li>
        <li>âœ… Táº¡o mÃ¡y sinh káº» Ä‘á»‹ch tá»± Ä‘á»™ng</li>
        <li>âœ… CÃ¡c lá»‡nh GML quan trá»ng: point_direction, instance_exists, with()</li>
        <li>âœ… Xá»­ lÃ½ va cháº¡m phá»©c táº¡p giá»¯a Ä‘áº¡n, káº» Ä‘á»‹ch vÃ  nhÃ¢n váº­t</li>
        <li>âœ… Sá»­ dá»¥ng lengthdir_x/y Ä‘á»ƒ tÃ­nh toÃ¡n vá»‹ trÃ­</li>
      </ul>
      <p><strong>BÃ i táº­p vá» nhÃ :</strong> Táº¡o game báº¯n sÃºng hoÃ n chá»‰nh vá»›i nhiá»u loáº¡i káº» Ä‘á»‹ch vÃ  power-up!</p>
    </section>

    <nav class="lesson-nav">
      <a href="lesson2.html" class="nav-link">â† Buá»•i 2: LÃ½ Thuyáº¿t GML</a>
      <a href="index.html" class="nav-link">ğŸ  Vá» trang chá»§</a>
    </nav>
  </main>
</body>
</html>